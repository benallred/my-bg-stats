# Roadmap

*Note: Items are numbered for reference only. Order does not represent priority.*

1. Add price-per-play statistics: cheapest game per play, most expensive game per play, average price-per-play
2. Add "Gaming Year in Review" section: New section positioned below stat cards and above diagnostics, using inline "description: number" format. Include:
   - **Engagement & Milestones:** Increase in all-time h-index and contributor games, yearly session h-index and contributor games, new milestones reached (games hitting fives/dimes/quarters/centuries), games closest to next milestone, biggest jumps (games with most increased play count vs previous year)
   - **Time & Activity:** Total days played, total play time (hours), longest total playtime in one day, shortest total playtime in one day, busiest gaming month, longest play streak (consecutive days), longest dry spell (days between sessions), most productive gaming day
   - **Game Statistics:** Most played game by days, most played game by hours, longest single play (game + duration), most time-efficient game (most plays per hour), marathon game (highest total hours), unique games played, new-to-me games played, highest rated new-to-me game, oldest game played (by publication year), newest game played (by publication year)
   - **Social & Locations:** Total number of other players (excluding self), total solo plays, total solo days, total solo-only days (no multiplayer games that day), most common player count, most common day to play, game played with the most unique players, most social game (played with most unique players), biggest gaming session (most players in single session/day), locations played in, game played in the most locations, most frequented location
   - **Collection & Variety:** Shelf of shame progress (games played for the first time, regardless of acquisition date), shelf of shame additions (games acquired this year still unplayed), resurrected games (not played previous year, played this year), dormant games (played previous year, not played this year), play concentration (% of plays from top 10 games), new vs familiar ratio (plays of new-to-me vs previously played)
   - **Records & Comparisons:** Personal records broken (all-time highs achieved this year), personal records set (all-time lows achieved this year), this year vs last year (plays, unique games, hours with % changes), speed gaming day (most games in shortest time), variety day (most unique games in one day), average play duration for the year, average rating of games played, weekend vs weekday play percentage
   - When viewing current year, show stats through latest logged play date only (no projections)
3. Improve copy display names: When only one copy is shown in a list, don't show "(Copy X)". When multiple copies of the same game are shown, use versionName from BGStatsExport in parentheses. If versionName is missing, use placeholder "no version set".
4. Add info icons to h-index cards: Display clickable info icon on all h-index stat cards (session, play count, and hour h-index). On click, show modal with metric definition and concrete example. Modal dismisses when tapped/clicked outside.
5. Add automated testing infrastructure: Set up Vitest testing framework with comprehensive test coverage for all statistics calculations and data processing. Create root package.json to consolidate npm commands (moving process-data command from scripts/package.json). Add tests/ folder with test files for stats.js functions (h-index calculations, milestones, collection stats, play stats) and process-data.js transformations. Include test fixtures with sample BGStatsExport data to validate data transformations consistently. Remove redundant scripts/package.json after migration.
6. Refactor detail section functions to reduce complexity: Replace large switch statements in `showDetailSection` and `showDiagnosticDetail` functions with a handler map pattern. Create configuration maps (`statDetailHandlers` and `diagnosticDetailHandlers`) where each stat type maps to a handler function that encapsulates title setting and content rendering. This reduces cyclomatic complexity, improves maintainability, and allows each stat type to have unique behavior without adding conditionals to the main functions.
7. Add session length substats to Total Days Played card: Show median and average play duration per gaming day. Calculate by grouping plays by date, summing durationMin for each day (exclude days with sum of 0), then computing median and average of those daily totals. Display as "Median: X.X hours/day" and "Average: X.X hours/day" substats. Year-filterable. Only includes days with gaming sessions (not all calendar days).
8. Refactor process-data.js for improved readability: Break the sequential script into smaller, well-named functions to improve code organization and readability. Each major processing step (game classification, copy metadata extraction, typical play time calculation, play duration denormalization, etc.) should be extracted into its own function. Keep all functionality in a single file. This refactoring should be done after item #5 is complete so that existing tests can validate the refactored code maintains the same behavior.
9. Add dark mode support: Implement automatic dark mode that respects system preferences by default. On first visit, detect and apply system color scheme preference. Save user's preference in localStorage for subsequent visits. Include optional manual toggle in UI (if implementation complexity is reasonable). Design a carefully crafted dark color palette (not simple color inversion) with consideration for readability of charts, graphs, and tables. Apply dark theme consistently across entire application including all stat cards, detail sections, and diagnostic views.
